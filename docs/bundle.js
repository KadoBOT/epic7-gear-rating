var app=function(){"use strict";function e(){}function n(e){return e()}function t(){return Object.create(null)}function a(e){e.forEach(n)}function l(e){return"function"==typeof e}function s(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}function u(e,n){e.appendChild(n)}function o(e,n,t){e.insertBefore(n,t||null)}function c(e){e.parentNode.removeChild(e)}function i(e){return document.createElement(e)}function r(e){return document.createTextNode(e)}function d(){return r(" ")}function m(e,n,t,a){return e.addEventListener(n,t,a),()=>e.removeEventListener(n,t,a)}function v(e,n,t){null==t?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function h(e,n){n=""+n,e.data!==n&&(e.data=n)}function f(e,n){(null!=n||e.value)&&(e.value=n)}function p(e,n){for(let t=0;t<e.options.length;t+=1){const a=e.options[t];if(a.__value===n)return void(a.selected=!0)}}function _(e){const n=e.querySelector(":checked")||e.options[0];return n&&n.__value}let b;function g(e){b=e}const $=[],L=[],x=[],D=[],y=Promise.resolve();let S=!1;function V(e){x.push(e)}function w(){const e=new Set;do{for(;$.length;){const e=$.shift();g(e),C(e.$$)}for(;L.length;)L.pop()();for(let n=0;n<x.length;n+=1){const t=x[n];e.has(t)||(t(),e.add(t))}x.length=0}while($.length);for(;D.length;)D.pop()();S=!1}function C(e){null!==e.fragment&&(e.update(e.dirty),a(e.before_update),e.fragment&&e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(V))}const N=new Set;let k;function A(e,n){e&&e.i&&(N.delete(e),e.i(n))}function E(e,n,t,a){if(e&&e.o){if(N.has(e))return;N.add(e),k.c.push(()=>{N.delete(e),a&&(t&&e.d(1),a())}),e.o(n)}}const M="undefined"!=typeof window?window:global;function O(e){e&&e.c()}function j(e,t,s){const{fragment:u,on_mount:o,on_destroy:c,after_update:i}=e.$$;u&&u.m(t,s),V(()=>{const t=o.map(n).filter(l);c?c.push(...t):a(t),e.$$.on_mount=[]}),i.forEach(V)}function P(e,n){const t=e.$$;null!==t.fragment&&(a(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx={})}function R(e,n){e.$$.dirty||($.push(e),S||(S=!0,y.then(w)),e.$$.dirty=t()),e.$$.dirty[n]=!0}function T(n,l,s,u,o,c){const i=b;g(n);const r=l.props||{},d=n.$$={fragment:null,ctx:null,props:c,update:e,not_equal:o,bound:t(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:[]),callbacks:t(),dirty:null};let m=!1;d.ctx=s?s(n,r,(e,t,a=t)=>(d.ctx&&o(d.ctx[e],d.ctx[e]=a)&&(d.bound[e]&&d.bound[e](a),m&&R(n,e)),t)):r,d.update(),m=!0,a(d.before_update),d.fragment=!!u&&u(d.ctx),l.target&&(l.hydrate?d.fragment&&d.fragment.l(function(e){return Array.from(e.childNodes)}(l.target)):d.fragment&&d.fragment.c(),l.intro&&A(n.$$.fragment),j(n,l.target,l.anchor),w()),g(i)}class q{$destroy(){P(this,1),this.$destroy=e}$on(e,n){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(){}}const{Object:B}=M;function H(e,n,t){const a=B.create(e);return a.key=n[t][0],a.value=n[t][1],a}function F(e){let n,t,l,s,r,h,_,b,g,$,L,x,D=!1,y=Object.entries(e.substats),S=[];for(let n=0;n<y.length;n+=1)S[n]=I(H(e,y,n));let w=e.isSelected&&z(e);function C(){D=!0,e.input_input_handler.call(g)}let N=e.isSelected&&G();return{c(){n=i("form"),t=i("div"),l=i("div"),s=i("select");for(let e=0;e<S.length;e+=1)S[e].c();r=d(),h=i("div"),_=i("div"),w&&w.c(),b=d(),g=i("input"),L=d(),N&&N.c(),v(s,"class","form-control"),v(s,"id","substatType"),void 0===e.selected&&V(()=>e.select_change_handler.call(s)),v(l,"class","col-5"),v(g,"type","number"),v(g,"class","form-control"),v(g,"id","substatValue"),g.disabled=$=Number(e.selected)<=0,v(g,"min",e.min),v(g,"max",e.max),v(g,"placeholder",e.substatPlaceholder),v(_,"class","input-group mb-2"),v(h,"class","col"),v(t,"class","form-row align-items-center"),x=[m(s,"change",e.select_change_handler),m(g,"input",C),m(g,"change",e.handleChange)]},m(a,c){o(a,n,c),u(n,t),u(t,l),u(l,s);for(let e=0;e<S.length;e+=1)S[e].m(s,null);p(s,e.selected),u(t,r),u(t,h),u(h,_),w&&w.m(_,null),u(_,b),u(_,g),f(g,e.substatValue),u(_,L),N&&N.m(_,null)},p(e,n){if(e.Object||e.substats||e.Number){let t;for(y=Object.entries(n.substats),t=0;t<y.length;t+=1){const a=H(n,y,t);S[t]?S[t].p(e,a):(S[t]=I(a),S[t].c(),S[t].m(s,null))}for(;t<S.length;t+=1)S[t].d(1);S.length=y.length}e.selected&&p(s,n.selected),n.isSelected?w?w.p(e,n):((w=z(n)).c(),w.m(_,b)):w&&(w.d(1),w=null),e.selected&&$!==($=Number(n.selected)<=0)&&(g.disabled=$),e.min&&v(g,"min",n.min),e.max&&v(g,"max",n.max),e.substatPlaceholder&&v(g,"placeholder",n.substatPlaceholder),!D&&e.substatValue&&f(g,n.substatValue),D=!1,n.isSelected?N||((N=G()).c(),N.m(_,null)):N&&(N.d(1),N=null)},d(e){e&&c(n),function(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}(S,e),w&&w.d(),N&&N.d(),a(x)}}}function I(e){let n,t,a,l,s,m=e.value.name+"";return{c(){n=i("option"),t=r(m),a=d(),n.__value=l=e.key,n.value=n.__value,n.disabled=s=0===Number(e.key)},m(e,l){o(e,n,l),u(n,t),u(n,a)},p(e,a){e.substats&&m!==(m=a.value.name+"")&&h(t,m),e.substats&&l!==(l=a.key)&&(n.__value=l),n.value=n.__value,e.substats&&s!==(s=0===Number(a.key))&&(n.disabled=s)},d(e){e&&c(n)}}}function z(e){let n,t,a,l;return{c(){n=i("div"),t=i("div"),a=r("Max: "),l=r(e.max),v(t,"class","input-group-text"),v(n,"class","input-group-prepend d-none d-md-block")},m(e,s){o(e,n,s),u(n,t),u(t,a),u(t,l)},p(e,n){e.max&&h(l,n.max)},d(e){e&&c(n)}}}function G(e){let n;return{c(){(n=i("div")).innerHTML='<div class="input-group-text">%</div>',v(n,"class","input-group-append")},m(e,t){o(e,n,t)},d(e){e&&c(n)}}}function J(n){let t,a=n.isDone&&F(n);return{c(){a&&a.c(),t=r("")},m(e,n){a&&a.m(e,n),o(e,t,n)},p(e,n){n.isDone?a?a.p(e,n):((a=F(n)).c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},i:e,o:e,d(e){a&&a.d(e),e&&c(t)}}}function K(e,n,t){let a,l,s,u,o,c,i,{isDone:r}=n,{enhancementLevel:d}=n,{handleValue:m}=n,{substats:v}=n;return e.$set=e=>{"isDone"in e&&t("isDone",r=e.isDone),"enhancementLevel"in e&&t("enhancementLevel",d=e.enhancementLevel),"handleValue"in e&&t("handleValue",m=e.handleValue),"substats"in e&&t("substats",v=e.substats)},e.$$.update=(e={selected:1,substats:1,substat:1,enhancementLevel:1,isSelected:1,min:1,max:1})=>{e.selected&&t("isSelected",l="0"!==a),(e.substats||e.selected)&&t("substat",s=v[a]),e.substat&&t("min",u=s.min),(e.substat||e.enhancementLevel)&&t("max",o=s.max*(Number(d)+1)),(e.isSelected||e.min||e.max)&&t("substatPlaceholder",c=l?`${u}-${o}`:"N/A"),e.isSelected||e.enhancementLevel},t("selected",a="0"),t("substatValue",i=""),{isDone:r,enhancementLevel:d,handleValue:m,substats:v,handleChange:function(){m([i,a])},selected:a,isSelected:l,min:u,max:o,substatPlaceholder:c,substatValue:i,select_change_handler:function(){a=_(this),t("selected",a),t("Object",Object),t("substats",v)},input_input_handler:function(){var e;e=this.value,t("substatValue",i=""===e?void 0:+e)}}}class Q extends q{constructor(e){super(),T(this,e,K,J,s,{isDone:0,enhancementLevel:0,handleValue:0,substats:0})}}function U(n){let t,a,l,s,d,m=n.getRating()+"";return{c(){t=i("div"),a=i("div"),l=r("Stats rolls luck: "),s=i("span"),d=r(m),v(s,"class","font-weight-bold text-monospace"),v(a,"class","card-body"),v(t,"class","card")},m(e,n){o(e,t,n),u(t,a),u(a,l),u(a,s),u(s,d)},p(e,n){e.getRating&&m!==(m=n.getRating()+"")&&h(d,m)},i:e,o:e,d(e){e&&c(t)}}}function W(e,n,t){let a,{values:l}=n,{enhancementLevel:s}=n;return e.$set=e=>{"values"in e&&t("values",l=e.values),"enhancementLevel"in e&&t("enhancementLevel",s=e.enhancementLevel)},e.$$.update=(e={enhancementLevel:1,values:1})=>{(e.enhancementLevel||e.values)&&t("getRating",a=()=>{const e=Number(s)+1,n=l.reduce((n,[t,a])=>n+100*t/(a*e+a*(l.length-1)),0);return console.log(n),n<=54?"F":n<=65?"E":n<=73?"D":n<=80?"C":n<=86?"B":n<=91?"A":n<=95?"S":n<=98?"SS":"SSS"})},{values:l,enhancementLevel:s,getRating:a}}class X extends q{constructor(e){super(),T(this,e,W,U,s,{values:0,enhancementLevel:0})}}function Y(e){let n,t,l,s,r,h,f,_,b,g,$,L,x,D,y,S,w,C,N,k,M,R,T,q,B,H,F;const I=new Q({props:{isDone:e.isDone,substats:e.substats,enhancementLevel:e.enhancementLevel,handleValue:e.handleValue(0)}}),z=new Q({props:{isDone:e.isDone,substats:e.substats,enhancementLevel:e.enhancementLevel,handleValue:e.handleValue(1)}}),G=new Q({props:{isDone:e.isDone,substats:e.substats,enhancementLevel:e.enhancementLevel,handleValue:e.handleValue(2)}}),J=new Q({props:{isDone:e.isDone,substats:e.substats,enhancementLevel:e.enhancementLevel,handleValue:e.handleValue(3)}}),K=new X({props:{values:e.values,enhancementLevel:e.enhancementLevel}});return{c(){n=i("div"),t=i("div"),l=i("select"),(s=i("option")).textContent="Select enhancement level",(r=i("option")).textContent="None",(h=i("option")).textContent="3+",(f=i("option")).textContent="6+",(_=i("option")).textContent="9+",(b=i("option")).textContent="12+",(g=i("option")).textContent="15",L=d(),x=i("div"),D=i("select"),(y=i("option")).textContent="Select equipment level",(S=i("option")).textContent="T1: (Level 45 ~ 57)",(w=i("option")).textContent="T2: (Level 58 ~ 71)",(C=i("option")).textContent="T3: (Level 72 ~85)",(N=i("option")).textContent="T4: (Level 88 ~ )",M=d(),O(I.$$.fragment),R=d(),O(z.$$.fragment),T=d(),O(G.$$.fragment),q=d(),O(J.$$.fragment),B=d(),O(K.$$.fragment),s.disabled=!0,s.__value="-1",s.value=s.__value,r.__value="0",r.value=r.__value,h.__value="1",h.value=h.__value,f.__value="2",f.value=f.__value,_.__value="3",_.value=_.__value,b.__value="4",b.value=b.__value,g.__value="5",g.value=g.__value,v(l,"class","form-control"),v(l,"id","enhancementLevel"),void 0===e.enhancementLevel&&V(()=>e.select0_change_handler.call(l)),v(t,"class","col"),y.disabled=!0,y.__value="-1",y.value=y.__value,S.__value="1",S.value=S.__value,w.__value="2",w.value=w.__value,C.__value="3",C.value=C.__value,N.__value="4",N.value=N.__value,v(D,"class","form-control"),v(D,"id","enhancementLevel"),void 0===e.level&&V(()=>e.select1_change_handler.call(D)),v(x,"class","col"),v(n,"class","form-row align-items-center"),F=[m(l,"change",e.select0_change_handler),m(D,"change",e.select1_change_handler)]},m(a,c){o(a,n,c),u(n,t),u(t,l),u(l,s),u(l,r),u(l,h),u(l,f),u(l,_),u(l,b),u(l,g),$="-1";for(var i=0;i<l.options.length;i+=1){var d=l.options[i];if("-1"===d.__value){d.selected=!0;break}}p(l,e.enhancementLevel),u(n,L),u(n,x),u(x,D),u(D,y),u(D,S),u(D,w),u(D,C),u(D,N),k="-1";for(var m=0;m<D.options.length;m+=1){var v=D.options[m];if("-1"===v.__value){v.selected=!0;break}}p(D,e.level),o(a,M,c),j(I,a,c),o(a,R,c),j(z,a,c),o(a,T,c),j(G,a,c),o(a,q,c),j(J,a,c),o(a,B,c),j(K,a,c),H=!0},p(e,n){e.enhancementLevel&&p(l,n.enhancementLevel),e.level&&p(D,n.level);const t={};e.isDone&&(t.isDone=n.isDone),e.substats&&(t.substats=n.substats),e.enhancementLevel&&(t.enhancementLevel=n.enhancementLevel),I.$set(t);const a={};e.isDone&&(a.isDone=n.isDone),e.substats&&(a.substats=n.substats),e.enhancementLevel&&(a.enhancementLevel=n.enhancementLevel),z.$set(a);const s={};e.isDone&&(s.isDone=n.isDone),e.substats&&(s.substats=n.substats),e.enhancementLevel&&(s.enhancementLevel=n.enhancementLevel),G.$set(s);const u={};e.isDone&&(u.isDone=n.isDone),e.substats&&(u.substats=n.substats),e.enhancementLevel&&(u.enhancementLevel=n.enhancementLevel),J.$set(u);const o={};e.values&&(o.values=n.values),e.enhancementLevel&&(o.enhancementLevel=n.enhancementLevel),K.$set(o)},i(e){H||(A(I.$$.fragment,e),A(z.$$.fragment,e),A(G.$$.fragment,e),A(J.$$.fragment,e),A(K.$$.fragment,e),H=!0)},o(e){E(I.$$.fragment,e),E(z.$$.fragment,e),E(G.$$.fragment,e),E(J.$$.fragment,e),E(K.$$.fragment,e),H=!1},d(e){e&&c(n),e&&c(M),P(I,e),e&&c(R),P(z,e),e&&c(T),P(G,e),e&&c(q),P(J,e),e&&c(B),P(K,e),a(F)}}}function Z(e,n,t){let a,l,s,u,o,c;return e.$$.update=(e={getMinAndMax:1,level:1,minAndMax:1,enhancementLevel:1})=>{(e.getMinAndMax||e.level)&&t("minAndMax",l=(e=>{const n=Number(e);return 4===n?[[5,9],[3,6],[4,8],[2,5]]:3===n?[[4,8],[3,5],[3,7],[1,4]]:2===n?[[3,7],[2,4],[3,6],[1,4]]:[[3,6],[2,4],[3,5],[1,3]]})(a)),e.minAndMax&&t("substats",s={0:{min:"",max:"",name:"No substat"},1:{min:l[0][0],max:l[0][1],name:"HP/Def/Eff/EffRes/Atk"},2:{min:l[1][0],max:l[1][1],name:"Crit Rate"},3:{min:l[2][0],max:l[2][1],name:"Crit Dmg"},4:{min:l[3][0],max:l[3][1],name:"Speed"},"-1":{min:0,max:0,name:"Other substat"}}),(e.level||e.enhancementLevel)&&t("isDone",c=a&&u)},t("level",a=""),t("enhancementLevel",u=""),t("values",o=[]),{handleValue:function(e){return function([n,a]){t("values",o[e]=[n,s[a].max],o)}},level:a,substats:s,enhancementLevel:u,values:o,isDone:c,select0_change_handler:function(){u=_(this),t("enhancementLevel",u)},select1_change_handler:function(){a=_(this),t("level",a)}}}class ee extends q{constructor(e){super(),T(this,e,Z,Y,s,{})}}function ne(n){let t;const a=new ee({});return{c(){O(a.$$.fragment)},m(e,n){j(a,e,n),t=!0},p:e,i(e){t||(A(a.$$.fragment,e),t=!0)},o(e){E(a.$$.fragment,e),t=!1},d(e){P(a,e)}}}return new class extends q{constructor(e){super(),T(this,e,null,ne,s,{})}}({target:document.getElementById("app"),props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
